<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>0</visible>
  <depth>100000</depth>
  <persistent>0</persistent>
  <parentName>obj_3d_parent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>clouds_rotation=0
clouds_speed=0.02

specialDistance = true;
___dist = 100000;
count = 0;
skyspeed = 0.1;
skytype = 'night'
timelength = 100;

xdir1 = 2.7;
ydir1 = 0.88;
zdir1 = 1.44;

xdir2 = 0.7;
ydir2 = 1.46;
zdir2 = -1.3;

soundfadespeed = 1000

cricketSound = audio_play_sound(snd_crickets,2,true);
rainSound = audio_play_sound(snd_rain,3,true);
birdSound = audio_play_sound(snd_birds,4,true);

audio_sound_gain(cricketSound,0.0,0);
audio_sound_gain(rainSound,0.0,0);
audio_sound_gain(birdSound,0.0,0);
audio_sound_gain(cricketSound,1,soundfadespeed);


//Create my light
generallight = getLightId();
d3d_light_define_direction(generallight,0,0,1,c_dkgray)
d3d_light_enable(generallight,true)

light1 = getLightId();
d3d_light_define_direction(light1,1,0,-1,make_color_rgb(50,50,75))
d3d_light_enable(light1,true)

light2 = getLightId();
d3d_light_define_direction(light2,0,1,-1,make_color_rgb(40,30,72))
d3d_light_enable(light2,true)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*xdir1+=keyboard_check(ord("Y"))*.01;
xdir1-=keyboard_check(ord("U"))*.01;
ydir1+=keyboard_check(ord("H"))*.01;
ydir1-=keyboard_check(ord("J"))*.01;
zdir1+=keyboard_check(ord("N"))*.01;
zdir1-=keyboard_check(ord("M"))*.01;
xdir2+=keyboard_check(ord("R"))*.01;
xdir2-=keyboard_check(ord("T"))*.01;
ydir2+=keyboard_check(ord("F"))*.01;
ydir2-=keyboard_check(ord("G"))*.01;
zdir2+=keyboard_check(ord("V"))*.01;
zdir2-=keyboard_check(ord("B"))*.01;*/

count+=skyspeed

d3d_set_culling(false);
    
if (skytype=='night') {
    
    // Skybox model    
    d3d_transform_set_identity();
    d3d_transform_add_rotation_z(clouds_rotation/2)
    d3d_transform_add_translation(obj_camera.x,obj_camera.y,obj_camera.z);

    d3d_model_draw(global.MODEL[MOD_SKYBALL],0,0,0,global.TEX[TEX_SKY]);
    d3d_transform_set_identity();
   
    // Light
    setGeneralLight(0);
    
    // Counter
    if (count &gt; timelength) {
        skytype='go_to_day'
        count = 0.001
        audio_sound_gain(cricketSound,0,soundfadespeed/4);
        audio_sound_gain(birdSound,1,soundfadespeed);
    }
}
    
if (skytype=='go_to_day') {
        
        d3d_transform_set_identity();
        d3d_transform_add_rotation_z(clouds_rotation/2);        
        d3d_transform_add_translation(obj_camera.x,obj_camera.y,obj_camera.z);

        d3d_model_draw(global.MODEL[MOD_SKYBALL],0,0,0,global.TEX[TEX_SKY]);
        d3d_transform_set_identity();
        
    draw_set_alpha(count/timelength);

    disableLights(); //We want the skies to be clear blue.
    
        d3d_transform_set_identity();    
        d3d_transform_add_rotation_z(clouds_rotation)        
        d3d_transform_add_scaling(1-(count/timelength)/4,1-(count/timelength)/4,1-(count/timelength)/4);
        d3d_transform_add_translation(obj_camera.x,obj_camera.y,obj_camera.z);
        
        d3d_model_draw(global.MODEL[MOD_SKYBALL],0,0,0,global.TEX[TEX_SKY_DAY]);
        d3d_transform_set_identity();
    
    draw_set_alpha(1);  
    enableLights();
    
    setGeneralLight(count/timelength);

    if count &gt; timelength {
        skytype='day'
        count = 0.001 
    }
}

if (skytype=='day') {
    
    disableLights(); //We want the skies to be clear blue.
        d3d_transform_set_identity();
        d3d_transform_add_rotation_z(clouds_rotation)        
        d3d_transform_add_translation(obj_camera.x,obj_camera.y,obj_camera.z);

        d3d_model_draw(global.MODEL[MOD_SKYBALL],0,0,0,global.TEX[TEX_SKY_DAY]);
        d3d_transform_set_identity();
        
    draw_set_alpha(1);  
    enableLights();
    setGeneralLight(1);
    
    if (count &gt; timelength) {
        skytype='go_to_night'
        count = 0.001
        audio_sound_gain(cricketSound,1,soundfadespeed);
        audio_sound_gain(birdSound,0,soundfadespeed/4);
    }
}
if (skytype=='go_to_night') {

    disableLights(); //We want the skies to be clear blue.   
        d3d_transform_set_identity();
        d3d_transform_add_rotation_z(clouds_rotation)
        d3d_transform_add_translation(obj_camera.x,obj_camera.y,obj_camera.z);
        
        d3d_model_draw(global.MODEL[MOD_SKYBALL],0,0,0,global.TEX[TEX_SKY_DAY]);
        d3d_transform_set_identity();
        
    draw_set_alpha(count/timelength);
    enableLights();
        
        d3d_transform_set_identity();
        d3d_transform_add_scaling(1-(count/timelength)/4,1-(count/timelength)/4,1-(count/timelength)/4);
        d3d_transform_add_rotation_z(clouds_rotation/2)
        d3d_transform_add_translation(obj_camera.x,obj_camera.y,obj_camera.z);
        
        d3d_model_draw(global.MODEL[MOD_SKYBALL],0,0,0,global.TEX[TEX_SKY]);
        d3d_transform_set_identity();
        
    draw_set_alpha(1);  
    d3d_set_lighting(true);
    setGeneralLight(1-(count/timelength));

    if count &gt; timelength {
        skytype='night'
        count = 0.001
    }
}
clouds_rotation+=clouds_speed
if (clouds_rotation&gt;360*2) {
    clouds_rotation=0;
}
d3d_transform_set_identity();
d3d_set_culling(true);

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
